<% content_for :javascripts do %>
  <%= javascript_include_tag "products/update_rating" %>
  <%= javascript_include_tag "products/add_to_cart" %>
<% end %>
<nav class="navbar navbar-expand-lg navbar-light bg-light">
  <img src="ecommerce_logo.png" class="col-md-2 m-1 p-0">
  <span class = "col-md-2 m-1 p-0"><%= link_to 'New Product', new_product_path
   %></span>
  <span class = "col-md-2 m-1 p-0"><%= link_to 'edit profile', edit_user_path(@current_user)
   %></span>
  <button class="btn btn-outline-success col-md-1 offset-md-13 m-1 p-0" type="button">Login</button>
  <span id="cart_elements" class = "col-md-2 offset-md-14 m-1 p-0 pl-5">0</span>
  <button class="btn btn-outline-success col-md-1 offset-md-15 m-1 p-0" type="button"><%= link_to 'Cart', cart_path((@current_user.carts.find_by_completed(false)).id)%></button>
</nav>
<p>All Products</p>
<table>
  <tr>
    <th>Product Name</th>
    <th>It's color</th>
    <th>Owner's Price</th>
    <th>Our discount</th>
    <th>It's description</th>
    <th>rating</th>
  </tr>
  <% @products.each do |product| %>
    <tr>
      <td><%= product.name %></td>
      <td><%= product.color %></td>
      <td><%= product.price %></td>
      <td><%= product.discount %></td>
      <td><%= product.description %></td>
      <td data-id=<%= "rating-#{ product.id }" %> ><%= product.rating %></td>
      <td><%= link_to 'Show', product_path(product) %></td>
      <td><%= link_to 'Edit', edit_product_path(product) %></td>
      <td><%= link_to 'Destroy', product_path(product),
              method: :delete,
              data: { confirm: 'Are you sure?' } %></td>
      <td class="abc"><%= link_to 'Add_To_Cart', product_add_to_cart_path(product), data: {id: product.id}, class: "add_to_cart" %></td>
      <td><%= link_to 'Remove_From_Cart', product_remove_from_cart_path(product)      , remote: true, class:"a", method: :delete, data: { confirm: 'Are you sure?' } %></td>
      <td><%= select_tag "rating", options_for_select(["0","1","2","3","4","5"]), class: "rating", data: { id: product.id} %></td>
    </tr>

  <% end %>
</table>
